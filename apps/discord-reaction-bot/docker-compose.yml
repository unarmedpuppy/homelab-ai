version: '3.8'

services:
  discord-reaction-bot:
    build: .
    container_name: discord-reaction-bot
    restart: unless-stopped
    environment:
      - DISCORD_TOKEN=${DISCORD_TOKEN}
      - AGENT_CORE_URL=${AGENT_CORE_URL:-http://agent-core:8000}
      - LOCAL_AI_URL=${LOCAL_AI_URL:-http://llm-router:8000}
      - LOCAL_AI_API_KEY=${LOCAL_AI_API_KEY}
      # Rate limiting settings (all optional with sensible defaults)
      # - TAYNE_COOLDOWN_SECONDS=5
      # - TAYNE_REACTION_CHANCE=0.33
      # - TAYNE_RAPID_FIRE_THRESHOLD=5
      # - TAYNE_RAPID_FIRE_WINDOW=60
    networks:
      - my-network
    labels:
      - "homepage.group=Bots"
      - "homepage.name=Tayne"
      - "homepage.icon=discord"
      - "homepage.description=Now Tayne I can get into"

networks:
  my-network:
    external: true
